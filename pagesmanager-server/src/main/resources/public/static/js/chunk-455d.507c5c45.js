(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-455d"],{bUXw:function(t,e,i){"use strict";i.r(e);var a=i("P2sY"),o=i.n(a),n=i("stgD"),r=(i("ZOF2"),{components:{mavonEditor:n.mavonEditor},data:function(){return{params:{},docForm:{name:"",parentName:"",isShow:"",content:""},templateList:[],docFormVisible:!1,dialogVisible:!1,filterText:"",data:[],defaultProps:{children:"children",label:"label"}}},watch:{$route:"initData",filterText:function(t){this.$refs.tree2.filter(t)}},created:function(){this.initData()},methods:{initData:function(){this.params=this.$route.query,this.docFormVisible=!1,this.resetForms(),this.loadTree(),this.initTemplates(),this.initProjectInfo()},loadTree:function(){var t=this.params.id;if(t){this.params.projectId=t;var e={};e.projectId=t,this.post("doc.treegrid.page",e,function(t){var e=t.data,i=this.convertToTreeData(e.rows,0);this.data=i})}},initTemplates:function(){this.post("template.listall",{},function(t){this.templateList=t.data})},resetForms:function(){var t=this.$refs;for(var e in t)"form"===t[e].$el.localName&&t[e].resetFields()},filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)},onNodeClick:function(t,e,i){if(!t.parentId)return!1;this.docFormVisible||(this.docFormVisible=!0);var a=t.id;this.$refs.docForm.resetFields(),this.post("doc.detail.get",{id:a},function(t){var e=t.data;e.isShow=e.isShow+"",o()(this.docForm,e)})},convertToTreeData:function(t,e){for(var i=[],a=[],o=0;o<t.length;o++)if(t[o].parentId===e){var n={label:t[o].name,id:t[o].id,parentId:t[o].parentId};(a=this.convertToTreeData(t,t[o].id)).length>0&&(n.children=a),i.push(n)}return i}}}),s=(i("z+xf"),i("KHd+")),l=Object(s.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-container",[i("el-aside",{staticStyle:{"min-height":"300px",width:"200px"}},[i("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"搜索文档...",size:"mini",clearable:""},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),t._v(" "),i("el-tree",{ref:"tree2",staticClass:"filter-tree",attrs:{data:t.data,props:t.defaultProps,"filter-node-method":t.filterNode,"highlight-current":!0,"expand-on-click-node":!1,"empty-text":"无数据","node-key":"id","default-expand-all":""},on:{"node-click":t.onNodeClick},scopedSlots:t._u([{key:"default",fn:function(e){e.node;var a=e.data;return i("span",{staticClass:"custom-tree-node"},[a.label.length<15?i("span",[t._v(t._s(a.label))]):i("span",[i("el-tooltip",{staticClass:"item",attrs:{content:a.label,effect:"light",placement:"right"}},[i("span",[t._v(t._s(a.label.substring(0,15)+"..."))])])],1)])}}])})],1),t._v(" "),i("el-main",{directives:[{name:"show",rawName:"v-show",value:t.docFormVisible,expression:"docFormVisible"}],staticStyle:{"padding-top":"2px"}},[i("el-form",{ref:"docForm",attrs:{inline:!0,model:t.docForm}},[i("mavon-editor",{attrs:{toolbarsFlag:!1,subfield:!1,defaultOpen:"preview"},model:{value:t.docForm.content,callback:function(e){t.$set(t.docForm,"content",e)},expression:"docForm.content"}})],1)],1)],1)],1)},[],!1,null,null,null);l.options.__file="docView.vue";e.default=l.exports},ieI5:function(t,e,i){},"z+xf":function(t,e,i){"use strict";var a=i("ieI5");i.n(a).a}}]);