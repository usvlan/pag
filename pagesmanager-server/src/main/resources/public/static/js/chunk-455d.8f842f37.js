(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-455d"],{bUXw:function(e,t,i){"use strict";i.r(t);var o=i("P2sY"),a=i.n(o),n=i("stgD"),r=(i("ZOF2"),{components:{mavonEditor:n.mavonEditor},data:function(){return{params:{},docForm:{name:"",parentName:"",isShow:"",content:""},templateList:[],docFormVisible:!1,dialogVisible:!1,filterText:"",data:[],defaultProps:{children:"children",label:"label"}}},watch:{$route:"initData",filterText:function(e){this.$refs.tree2.filter(e)}},created:function(){this.initData()},methods:{initData:function(){this.params=this.$route.query,this.docFormVisible=!1,this.resetForms(),this.loadTree(),this.initProjectInfo()},loadTree:function(){var e=this.params.id;if(e){this.params.projectId=e;var t={};t.projectId=e,this.post("nologin.doc.treegrid.page",t,function(e){var t=e.data,i=this.convertToTreeData(t.rows,0);this.data=i})}},resetForms:function(){var e=this.$refs;for(var t in e)"form"===e[t].$el.localName&&e[t].resetFields()},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},onNodeClick:function(e,t,i){if(!e.parentId)return!1;this.docFormVisible||(this.docFormVisible=!0);var o=e.id;this.$refs.docForm.resetFields(),this.post("nologin.doc.detail.get",{id:o},function(e){var t=e.data;t.isShow=t.isShow+"",a()(this.docForm,t)})},convertToTreeData:function(e,t){for(var i=[],o=[],a=0;a<e.length;a++)if(e[a].parentId===t){var n={label:e[a].name,id:e[a].id,parentId:e[a].parentId};(o=this.convertToTreeData(e,e[a].id)).length>0&&(n.children=o),i.push(n)}return i}}}),s=(i("z+xf"),i("KHd+")),l=Object(s.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-container",[i("el-aside",{staticStyle:{"min-height":"300px",width:"200px"}},[i("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"搜索文档...",size:"mini",clearable:""},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),e._v(" "),i("el-tree",{ref:"tree2",staticClass:"filter-tree",attrs:{data:e.data,props:e.defaultProps,"filter-node-method":e.filterNode,"highlight-current":!0,"expand-on-click-node":!1,"empty-text":"无数据","node-key":"id","default-expand-all":""},on:{"node-click":e.onNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var o=t.data;return i("span",{staticClass:"custom-tree-node"},[o.label.length<15?i("span",[e._v(e._s(o.label))]):i("span",[i("el-tooltip",{staticClass:"item",attrs:{content:o.label,effect:"light",placement:"right"}},[i("span",[e._v(e._s(o.label.substring(0,15)+"..."))])])],1)])}}])})],1),e._v(" "),i("el-main",{directives:[{name:"show",rawName:"v-show",value:e.docFormVisible,expression:"docFormVisible"}],staticStyle:{"padding-top":"2px"}},[i("el-form",{ref:"docForm",attrs:{inline:!0,model:e.docForm}},[i("mavon-editor",{attrs:{toolbarsFlag:!1,subfield:!1,defaultOpen:"preview"},model:{value:e.docForm.content,callback:function(t){e.$set(e.docForm,"content",t)},expression:"docForm.content"}})],1)],1)],1)],1)},[],!1,null,null,null);l.options.__file="docView.vue";t.default=l.exports},ieI5:function(e,t,i){},"z+xf":function(e,t,i){"use strict";var o=i("ieI5");i.n(o).a}}]);